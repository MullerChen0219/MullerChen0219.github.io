<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test FB Login</title>
</head>
<body>
    <button onclick="checkLoginState()">登入</button>
    <button onclick="logout()">登出</button>
    
    <script>

        window.fbAsyncInit = function() {
    FB.init({
        appId      : '3389736944622065',//15碼數字字串不含大括號
        cookie     : true,
        xfbml      : true,
        version    : 'v16.0' //筆者目前是v3.1
        });
        FB.AppEvents.logPageView();   
        
        function login() {
    FB.login(function (response) {
        console.log(response);
        if (response.status === "connected") {
        FB.api('/me', {
            'fields': 'id,name,email,picture'
        }, function (response) {
            console.log(response);
        });
        }
    }, {
        scope: 'email',
        auth_type: 'rerequest'
        });
    }

        function checkLoginState() {
    FB.getLoginStatus(function (response) {
        if(response.status === 'connected'){
        console.log('你已經登入囉')
        }else{
        login()
        }
    });
    }
        
    };

    (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));


    
    
    </script>
</body>
</html>